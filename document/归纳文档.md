## 常用术语

material： 材质
geometry： 几何体
camera： 相机
scene： 场景
renderer： 渲染器
cube： 立方体
mesh： 网格
texture： 纹理
vector：矢量，向量

## 通用代码

```js
import * as THREE from "three";

const width = window.innerWidth;
const height = window.innerHeight;
const raito = width / height;
const fov = 45;

const scene = new THREE.Scene();
scene.background = new THREE.Color("#eee");

const camera = new THREE.PerspectiveCamera(fov, raito, 1, 1000);
// 设置相机位置与方向
camera.position.set(0, 0, 100);
camera.lookAt(0, 0, 0);

const renderer = new THREE.WebGLRenderer();
//设置渲染区域尺寸
renderer.setSize(width, height);

// 创建几何体、材质、网格 将网格添加到场景
const geometry = new THREE.BoxGeometry(1, 1, 1);
const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
const mesh = new THREE.Mesh(geometry, material);
scene.add(mesh);

document.body.appendChild(renderer.domElement);
```
**坐标辅助器：**

https://threejs.org/docs/index.html#api/zh/helpers/AxesHelper

```js
// 创建坐标辅助器
const axesHelper = new THREE.AxesHelper(5);
scene.add(axesHelper);
```



**位移、缩放、旋转、父子元素：**

threejs中如果对象的类是继承自`Object3D`，那么就可以使用位移、缩放、旋转等功能，并且相互之间可以嵌套，在修改父元素时 子元素也会产生相对的变化

**`Object3D`** https://threejs.org/docs/index.html#api/zh/core/Object3D

```js
//设置该向量的x、y 和 z 分量。
mesh.position.set(x,y,z);
//直接设置position的x,y,z属性
mesh.position.x = x;
mesh.position.y = y;
mesh.position.z = z;

//例如设置x轴放大3倍、y轴方向放大2倍、z轴方向不变
cube.scale.set(3, 2, 1);
//单独设置某个轴的缩放
cube.scale.x = 3;

//直接设置旋转属性，例如围绕x轴旋转90度
cube.rotation.x = -Math.PI/2;
//围绕x轴旋转45度
cube.rotation.set(-Math.PI / 4, 0, 0, "XZY");
```

**轨道控制器：**

https://threejs.org/docs/index.html#examples/zh/controls/OrbitControls

```js
import { OrbitControls } from "../../node_modules/three/examples/jsm/controls/OrbitControls.js";

//创建鼠标控制器
let controls = new OrbitControls(camera, renderer.domElement);
// 设置自动旋转、设置阻尼效果
controls.autoRotate = true;
controls.enableDamping = true;
//监听控制器，每次拖动后重新渲染画面
controls.addEventListener("change", function () {
  renderer.render(scene, camera); //执行渲染操作
});
```

**加载模型：**

https://blog.csdn.net/m0_56023096/article/details/135604100

```js
import { GLTFLoader } from "three/addons/loaders/GLTFLoader.js";

const loader = new GLTFLoader();
loader.load(
  "path/to/model.glb",
  function (gltf) {
    // gltf.scene.traverse((obj) => {
    //   // 将图片作为纹理加载
    //   let imgTexture = new THREE.TextureLoader().load("/textures/xxxx.png");
    //   // 调整纹理图的方向
    //   imgTexture.flipY = false;
    //   // 将纹理图生成材质
    //   const material = new THREE.MeshBasicMaterial({
    //     map: imgTexture,
    //   });
    //   obj.material = material;
    // });
    scene.add(gltf.scene);
  },
  undefined,
  function (error) {
    console.error(error);
  }
);
```

**添加光源：**

```js
/**
 * 光源设置
 */
//新建点光源（常用光源分为点光源和环境光，点光源的效果类似灯泡，环境光的效果类似白天的太阳光）
var point = new THREE.PointLight(0xffffff);
//设置点光源的位置
point.position.set(400, 200, 300);
//将点光源添加到场景中
scene.add(point);
```

## 相关网站

官方文档 https://threejs.org/docs/index.html#manual/zh/introduction/

官方文章 https://threejs.org/manual/#zh/fundamentals

官方推荐教程 https://threejs.org/docs/index.html#manual/zh/introduction/Useful-links

sketch 模型网站 https://sketchfab.com/3d-models?features=downloadable&sort_by=-likeCount&cursor=cD0yOTk5

## 相关库

物理引擎/效果（Physics） Oimo.js、enable3d、ammo.js、cannon-es、rapier、Jolt

Geometry THREE.MeshLine

3D 文字和布局（3D Text and Layout）troika-three-text three-mesh-ui

粒子系统（Particle Systems） three.quarks three-nebula

逆向运动学（Inverse Kinematics） THREE.IK fullik closed-chain-ik

光线投射性能表现（Intersection and Raycast Performance）three-mesh-bvh

轨迹追踪（Path Tracing）three-gpu-pathtracer

## 常见问题

### 在窗口被重新调整大小的时候，如何保持大小不变

我们以一定的百分比增加了窗口的高度，那我们所想要的结果便是所有距离的可见高度都增加相同的百分比。

这并不能通过改变摄像机的位置来实现，相反，你得改变摄像机的 **视野角度（FOV）**

```js
visible_height =
  2 * Math.tan(((Math.PI / 180) * camera.fov) / 2) * distance_from_camera;
```
